<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NXD - Nexus Data Exchange</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>üè≠ NXD</h1>
                <p>Nexus Data Exchange</p>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item active" data-page="live">
                    <span class="nav-icon">üì°</span>
                    <span class="nav-text">Live View</span>
                </li>
                <li class="nav-item" data-page="financeiro">
                    <span class="nav-icon">üí∞</span>
                    <span class="nav-text">Financeiro</span>
                </li>
                <li class="nav-item" data-page="comparativo">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Comparativos</span>
                </li>
                <li class="nav-item" data-page="config">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Configura√ß√µes</span>
                </li>
            </ul>

            <div class="sidebar-footer">
                <div class="factory-badge" id="factory-badge">
                    <span class="factory-icon">üè≠</span>
                    <span class="factory-name" id="sidebar-factory-name">-</span>
                </div>
                <button class="btn-logout" onclick="logout()">Sair</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Login Section -->
            <div id="login-section" class="page active">
                <div class="login-container">
                    <div class="login-header">
                        <h1>üè≠ NXD</h1>
                        <p>Nexus Data Exchange - Intelig√™ncia Industrial em Tempo Real</p>
                    </div>
                    
                    <div class="login-card">
                        <h2>üîß Configura√ß√£o Inicial</h2>
                        
                        <div class="form-group">
                            <label>Criar Nova F√°brica</label>
                            <input type="text" id="factory-name" placeholder="Nome da F√°brica" />
                            <button class="btn-primary" onclick="createFactory()">Criar F√°brica</button>
                        </div>
                        
                        <div id="api-key-result" class="api-result"></div>
                        
                        <hr>
                        
                        <div class="form-group">
                            <label>Acessar Dashboard</label>
                            <input type="text" id="api-key-input" placeholder="Cole sua API Key aqui" />
                            <button class="btn-primary" onclick="loadDashboard()">Entrar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live View Page -->
            <div id="live-page" class="page">
                <div class="page-header">
                    <h2>üì° Live View</h2>
                    <p>Monitoramento em tempo real das m√°quinas</p>
                </div>
                
                <div id="machines-grid" class="machines-grid">
                    <!-- Cards de m√°quinas -->
                </div>
                
                <div id="no-machines" class="empty-state">
                    <p>‚è≥ Aguardando dados do DX...</p>
                    <p>Configure o m√≥dulo DX com a API Key e os dados aparecer√£o aqui.</p>
                </div>
            </div>

            <!-- Financeiro Page -->
            <div id="financeiro-page" class="page">
                <div class="page-header">
                    <h2>üí∞ Painel Financeiro</h2>
                    <p>Impacto financeiro em tempo real</p>
                </div>
                
                <div class="widgets-grid">
                    <!-- Widget Lucro Cessante -->
                    <div class="widget widget-large lucro-cessante">
                        <div class="widget-header">
                            <h3>üí∏ Lucro Cessante</h3>
                            <span class="widget-subtitle">Preju√≠zo por m√°quinas paradas</span>
                        </div>
                        <div class="widget-body">
                            <div class="big-number negative" id="lucro-cessante-total">
                                R$ 0,00
                            </div>
                            <div class="lucro-details" id="lucro-details">
                                <!-- Detalhes por m√°quina -->
                            </div>
                        </div>
                    </div>

                    <!-- Widget Produ√ß√£o Total -->
                    <div class="widget producao-total">
                        <div class="widget-header">
                            <h3>üì¶ Produ√ß√£o Total</h3>
                            <span class="widget-subtitle">Pe√ßas produzidas hoje</span>
                        </div>
                        <div class="widget-body">
                            <div class="big-number positive" id="total-pecas">0</div>
                            <span class="unit">pe√ßas</span>
                        </div>
                    </div>

                    <!-- Widget Energia -->
                    <div class="widget energia-total">
                        <div class="widget-header">
                            <h3>‚ö° Consumo Energia</h3>
                            <span class="widget-subtitle">Total do dia</span>
                        </div>
                        <div class="widget-body">
                            <div class="big-number neutral" id="total-energia">0</div>
                            <span class="unit">kWh</span>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Status Financeiro -->
                <div class="table-container">
                    <h3>üìã Status Financeiro por M√°quina</h3>
                    <table class="data-table" id="financial-table">
                        <thead>
                            <tr>
                                <th>M√°quina</th>
                                <th>Status</th>
                                <th>Custo/Hora</th>
                                <th>Tempo Parado</th>
                                <th>Preju√≠zo</th>
                            </tr>
                        </thead>
                        <tbody id="financial-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Comparativo Page -->
            <div id="comparativo-page" class="page">
                <div class="page-header">
                    <h2>üìä An√°lise Comparativa</h2>
                    <p>Compare o desempenho das m√°quinas</p>
                </div>
                
                <div class="widgets-grid">
                    <!-- Widget Efici√™ncia -->
                    <div class="widget widget-large">
                        <div class="widget-header">
                            <h3>üèÜ Radar de Efici√™ncia</h3>
                            <span class="widget-subtitle">Pe√ßas produzidas por kWh consumido</span>
                        </div>
                        <div class="widget-body">
                            <div class="chart-container">
                                <canvas id="efficiency-chart"></canvas>
                            </div>
                            <div class="efficiency-winner" id="efficiency-winner">
                                <!-- M√°quina mais eficiente -->
                            </div>
                        </div>
                    </div>

                    <!-- Widget Sa√∫de -->
                    <div class="widget widget-large">
                        <div class="widget-header">
                            <h3>üîÆ Previs√£o de Parada</h3>
                            <span class="widget-subtitle">Indicador de sa√∫de das m√°quinas</span>
                        </div>
                        <div class="widget-body">
                            <div class="health-indicators" id="health-indicators">
                                <!-- Indicadores de sa√∫de -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°fico de Produ√ß√£o -->
                <div class="chart-full-width">
                    <h3>üìà Produ√ß√£o Comparativa</h3>
                    <div class="chart-container-large">
                        <canvas id="production-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Config Page -->
            <div id="config-page" class="page">
                <div class="page-header">
                    <h2>‚öôÔ∏è Configura√ß√µes</h2>
                    <p>Configure sua f√°brica e integra√ß√£o</p>
                </div>
                
                <div class="config-cards">
                    <div class="config-card">
                        <h3>üîë API Key</h3>
                        <p>Use esta chave para configurar seu m√≥dulo DX:</p>
                        <div class="api-key-display" id="config-api-key">-</div>
                        <button class="btn-secondary" onclick="copyApiKey()">üìã Copiar</button>
                    </div>

                    <div class="config-card">
                        <h3>üì° Endpoint de Ingest√£o</h3>
                        <p>Configure o DX para enviar dados para:</p>
                        <div class="api-key-display" id="config-endpoint">-</div>
                        <button class="btn-secondary" onclick="copyEndpoint()">üìã Copiar</button>
                    </div>

                    <div class="config-card">
                        <h3>üè≠ Informa√ß√µes da F√°brica</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Nome:</span>
                                <span class="info-value" id="config-factory-name">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">M√°quinas conectadas:</span>
                                <span class="info-value" id="config-machine-count">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
